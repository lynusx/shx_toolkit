# 自定义脏污类型功能指南

## 功能概述

EL图片收集工具支持自定义脏污类型，可以：
- 添加新的脏污类型
- 编辑现有脏污类型
- 删除不需要的脏污类型
- 恢复默认配置

## 默认脏污类型

系统内置以下8种默认脏污类型：

| 显示名称 | 文件夹名称 |
|---------|-----------|
| 脏污 | NG_脏污_B |
| 划伤 | NG_划伤_B |
| 断删 | NG_断删_A |
| 隐裂 | NG_隐裂_A |
| 虚焊 | NG_虚焊_A |
| 异物 | NG_异物_B |
| 崩边 | NG_崩边_B |
| 色差 | NG_色差_A |

## 使用方法

### 1. 打开脏污类型管理

在离线EL收集页面，点击脏污类型卡片右上角的 **"管理"** 按钮。

### 2. 添加新类型

1. 点击 **"添加"** 按钮
2. 输入显示名称（如：自定义缺陷）
3. 输入文件夹名称（如：NG_自定义缺陷_A）
4. 点击 **"添加"** 确认

**文件夹名称格式要求：**
- 必须以 `NG_` 开头
- 中间为缺陷名称
- 必须以 `_A` 或 `_B` 结尾
- 示例：`NG_脏污_B`, `NG_划伤_A`

### 3. 编辑类型

1. 在列表中找到要编辑的类型
2. 点击右侧的 **编辑图标**（铅笔）
3. 修改显示名称或文件夹名称
4. 点击 **"保存"** 确认

### 4. 删除类型

1. 在列表中找到要删除的类型
2. 点击右侧的 **删除图标**（垃圾桶）
3. 在确认对话框中点击 **"删除"** 确认

### 5. 恢复默认

如果需要恢复系统默认的脏污类型列表：
1. 点击管理对话框底部的 **"恢复默认"** 按钮
2. 所有自定义修改将被重置

## 配置文件

脏污类型配置保存在：`config/defect_types.json`

示例内容：
```json
[
  {
    "name": "脏污",
    "folderName": "NG_脏污_B"
  },
  {
    "name": "划伤",
    "folderName": "NG_划伤_B"
  },
  {
    "name": "自定义缺陷",
    "folderName": "NG_自定义缺陷_A"
  }
]
```

## 测试自定义类型

已创建测试目录：
```
test_data/line_10.108.8.232/SaveImages/A-01-B/20260206/白班/8/NG_自定义缺陷_A/EL_custom_001.png
```

测试步骤：
1. 添加脏污类型：
   - 名称：`自定义缺陷`
   - 文件夹：`NG_自定义缺陷_A`
2. 选择该类型
3. 扫描测试数据
4. 应找到 `EL_custom_001.png`

## 注意事项

1. **文件夹名称唯一性**：文件夹名称不能重复
2. **格式验证**：系统会自动验证文件夹名称格式
3. **级联更新**：编辑文件夹名称后，已选列表会自动更新
4. **级联删除**：删除类型后，如果已选中会自动取消选中
